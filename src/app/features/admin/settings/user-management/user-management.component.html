<div class="user-management-page">
  <!-- Page Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>إدارة المستخدمين</h1>
      <p>عرض وإدارة جميع المستخدمين في النظام</p>
    </div>
    <div class="header-actions">
      <button class="btn-primary">
        <i class="fas fa-user-plus"></i>
        إضافة مستخدم جديد
      </button>
    </div>
  </div>

  <!-- Filters and Search -->
  <div class="filters-section">
    <div class="search-container">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input 
          type="text" 
          placeholder="البحث عن مستخدم..." 
          [(ngModel)]="searchQuery"
          (input)="onSearchChange()"
          class="search-input">
      </div>
    </div>
    
    <div class="filters-row">
      <div class="filter-container">
        <select 
          [(ngModel)]="selectedRole" 
          (change)="onRoleChange()"
          class="filter-select">
          <option value="all">جميع الأدوار</option>
          <option *ngFor="let role of roles" [value]="role.value">
            {{ role.label }}
          </option>
        </select>
      </div>
      
      <div class="filter-container">
        <select 
          [(ngModel)]="selectedStatus" 
          (change)="onStatusChange()"
          class="filter-select">
          <option value="all">جميع الحالات</option>
          <option value="نشط">نشط</option>
          <option value="غير نشط">غير نشط</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Users Table -->
  <div class="users-table-container">
    <div class="table-header">
      <h3>قائمة المستخدمين ({{ filteredUsers.length }})</h3>
    </div>
    
    <div class="table-responsive">
      <table class="users-table">
        <thead>
          <tr>
            <th>المستخدم</th>
            <th>البريد الإلكتروني</th>
            <th>الدور</th>
            <th>الحالة</th>
            <th>آخر تسجيل دخول</th>
            <th>تاريخ الإنشاء</th>
            <th>الإجراءات</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let user of filteredUsers" class="user-row">
            <td class="user-info">
              <div class="user-avatar">
                <i class="fas fa-user"></i>
              </div>
              <div class="user-details">
                <div class="user-name">{{ user.name }}</div>
                <div class="user-id">#{{ user.id }}</div>
              </div>
            </td>
            <td class="user-email">{{ user.email }}</td>
            <td class="user-role">
              <span class="role-badge" [class]="getRoleClass(user.role)">
                {{ user.roleLabel }}
              </span>
            </td>
            <td class="user-status">
              <span class="status-badge" [class]="getStatusClass(user.status)">
                {{ user.status }}
              </span>
            </td>
            <td class="last-login">{{ user.lastLogin }}</td>
            <td class="created-at">{{ user.createdAt }}</td>
            <td class="actions">
              <div class="action-buttons">
                <button class="btn-icon" title="عرض التفاصيل">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="btn-icon" title="تعديل">
                  <i class="fas fa-edit"></i>
                </button>
                <button 
                  class="btn-icon" 
                  [class]="user.status === 'نشط' ? 'btn-warning' : 'btn-success'"
                  [title]="user.status === 'نشط' ? 'إلغاء تفعيل' : 'تفعيل'"
                  (click)="toggleUserStatus(user)">
                  <i class="fas" [class]="user.status === 'نشط' ? 'fa-ban' : 'fa-check'"></i>
                </button>
                <button 
                  class="btn-icon btn-danger" 
                  title="حذف"
                  (click)="deleteUser(user)">
                  <i class="fas fa-trash"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <!-- Empty State -->
  <div class="empty-state" *ngIf="filteredUsers.length === 0">
    <div class="empty-icon">
      <i class="fas fa-users"></i>
    </div>
    <h3>لا توجد نتائج</h3>
    <p>لم يتم العثور على مستخدمين يطابقون معايير البحث</p>
    <button class="btn-primary">إضافة مستخدم جديد</button>
  </div>
</div>
