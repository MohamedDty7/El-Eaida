<div class="appointments-report-container">
  <div class="header">
    <h2>تقرير المواعيد</h2>
    <p>إحصائيات مفصلة عن مواعيد العيادة</p>
  </div>

  <div class="filters">
    <div class="filter-group">
      <label for="period">الفترة الزمنية</label>
      <select id="period" [(ngModel)]="selectedPeriod" (change)="onPeriodChange()" class="filter-select">
        <option value="week">الأسبوع الحالي</option>
        <option value="month">الشهر الحالي</option>
        <option value="quarter">الربع الحالي</option>
        <option value="year">السنة الحالية</option>
      </select>
    </div>
  </div>

  <div class="stats-grid">
    <div class="stat-card total">
      <div class="stat-icon">
        <i class="fas fa-calendar-alt"></i>
      </div>
      <div class="stat-content">
        <h3>{{ totalAppointments }}</h3>
        <p>إجمالي المواعيد</p>
      </div>
    </div>

    <div class="stat-card completed">
      <div class="stat-icon">
        <i class="fas fa-check-circle"></i>
      </div>
      <div class="stat-content">
        <h3>{{ completedAppointments }}</h3>
        <p>المواعيد المكتملة</p>
        <span class="stat-rate">{{ getCompletionRate() }}%</span>
      </div>
    </div>

    <div class="stat-card cancelled">
      <div class="stat-icon">
        <i class="fas fa-times-circle"></i>
      </div>
      <div class="stat-content">
        <h3>{{ cancelledAppointments }}</h3>
        <p>المواعيد الملغية</p>
        <span class="stat-rate">{{ getCancellationRate() }}%</span>
      </div>
    </div>

    <div class="stat-card no-show">
      <div class="stat-icon">
        <i class="fas fa-user-times"></i>
      </div>
      <div class="stat-content">
        <h3>{{ noShowAppointments }}</h3>
        <p>عدم الحضور</p>
        <span class="stat-rate">{{ getNoShowRate() }}%</span>
      </div>
    </div>
  </div>

  <div class="chart-section">
    <h3>المواعيد اليومية</h3>
    <div class="chart-container">
      <div class="chart-placeholder">
        <i class="fas fa-chart-bar"></i>
        <p>رسم بياني للمواعيد اليومية</p>
        <small>سيتم إضافة الرسم البياني في التحديث القادم</small>
      </div>
    </div>
  </div>

  <div class="table-section">
    <h3>تفاصيل المواعيد</h3>
    <div class="table-container">
      <table class="report-table">
        <thead>
          <tr>
            <th>التاريخ</th>
            <th>إجمالي المواعيد</th>
            <th>مكتمل</th>
            <th>ملغي</th>
            <th>عدم حضور</th>
            <th>معدل الإكمال</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let data of appointmentData">
            <td>{{ data.date | date:'short' }}</td>
            <td>{{ data.total }}</td>
            <td>{{ data.completed }}</td>
            <td>{{ data.cancelled }}</td>
            <td>{{ data.noShow }}</td>
            <td>
              <span class="completion-rate">
                {{ data.total > 0 ? (data.completed / data.total * 100).toFixed(1) : 0 }}%
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
